{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hackathon & Career Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Google Sans', Roboto, Arial, sans-serif;
        }
        .form-container {
            max-width: 900px;
            margin: 30px auto;
            background: white;
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }
        .form-header {
            border-bottom: 2px solid #673ab7;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .form-header h1 {
            color: #202124;
            font-size: 28px;
            font-weight: 400;
            margin-bottom: 15px;
        }
        .form-description {
            color: #5f6368;
            line-height: 1.6;
        }
        .section-header {
            background-color: #f1f3f4;
            padding: 12px 16px;
            margin: 30px -40px 20px -40px;
            font-size: 18px;
            font-weight: 500;
            color: #202124;
        }
        .form-label {
            font-weight: 500;
            color: #202124;
            margin-bottom: 8px;
        }
        .required-field::after {
            content: " *";
            color: #d93025;
        }
        .form-control, .form-select {
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 10px 12px;
        }
        .form-control:focus, .form-select:focus {
            border-color: #673ab7;
            box-shadow: 0 0 0 0.2rem rgba(103, 58, 183, 0.25);
        }
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .form-check {
            padding-left: 0;
        }
        .form-check-input {
            margin-right: 8px;
        }
        .btn-primary {
            background-color: #673ab7;
            border-color: #673ab7;
            padding: 12px 32px;
            font-weight: 500;
            font-size: 16px;
        }
        .btn-primary:hover {
            background-color: #5e35b1;
            border-color: #5e35b1;
        }
        .errorlist {
            list-style: none;
            padding: 0;
            margin: 5px 0 0 0;
        }
        .errorlist li {
            color: #d93025;
            font-size: 14px;
        }
        .help-text {
            font-size: 12px;
            color: #5f6368;
            margin-top: 4px;
        }
        .conditional-field {
            display: none;
            margin-left: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-left: 3px solid #673ab7;
            border-radius: 4px;
            margin-top: 15px;
        }
        .conditional-field.show {
            display: block;
        }
        .checkmark-list {
            list-style: none;
            padding-left: 0;
        }
        .checkmark-list li:before {
            content: "✔ ";
            color: #34a853;
            font-weight: bold;
            margin-right: 8px;
        }
        .header-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
}

.form-title {
    margin: 0;
    text-align: center;
    flex: 1;   /* This keeps title centered */
}

.header-logo {
    width: 80px;   /* Adjust size as needed */
    height: auto;
}

    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
        <div class="header-row">
        <img src="{% static 'images/ingage_logo.png' %}" alt="Left Logo" class="header-logo left-logo" style="width: 150px;height:auto ;">
        <center><h1>{{ form_title }}</h1></center>
        <img src="{% static 'images/naan_mudhalvan.png' %}" alt="Right Logo" class="header-logo right-logo" style="width: 150px;height:auto ;">
        </div><br><br>
            <b><h4>Skill Development Program – Hackathon, Free Course & Career Opportunity Registration</h4></b>
            <div class="form-description">
                <p><strong>Welcome!</strong></p>
                <p>This form is designed to help students access multiple opportunities through a single registration:</p>
                <ul class="checkmark-list">
                    <li>Participation in upcoming Hackathon</li>
                    <li>Enrollment in FREE certified skill development courses</li>
                    <li>Access to Internship and Job opportunities</li>
                    <li>Career guidance and mentoring support</li>
                </ul>
                <p>Your responses will help us understand your interests, skills, and career goals so we can support you better.</p>
                <p><em>Please fill in the details carefully and accurately.</em></p>
            </div>
        </div>
        <form method="post" enctype="multipart/form-data" id="registrationForm" novalidate>
            {% csrf_token %}

            <!-- SECTION 1 – BASIC DETAILS -->
            <div class="section-header">SECTION 1 – BASIC DETAILS</div>
            
            <div class="mb-3">
                <label for="{{ form.full_name.id_for_label }}" class="form-label required-field">1. Full Name</label>
                {{ form.full_name }}
                {% if form.full_name.errors %}
                    <ul class="errorlist">{% for error in form.full_name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>


            <div class="mb-3">
                <label for="{{ form.zone.id_for_label }}" class="form-label required-field">
                    2. Zone
                </label>

                {{ form.zone }}

                {% if form.zone.errors %}
                    <ul class="errorlist">
                        {% for error in form.zone.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        <div class="mb-3">
            <label for="{{ form.district.id_for_label }}" class="form-label required-field">
                3. District
            </label>
            {{ form.district }}
            {% if form.district.errors %}
                <ul class="errorlist">
                    {% for error in form.district.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        <div class="mb-3">
            <label for="{{ form.college.id_for_label }}" class="form-label required-field">
                4. College
            </label>
            {{ form.college }}
            {% if form.college.errors %}
                <ul class="errorlist">
                    {% for error in form.college.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>


            <div class="mb-3">
                <label for="{{ form.branch_department.id_for_label }}" class="form-label required-field">5. Branch / Department</label>
                {{ form.branch_department }}
                <div class="help-text">(Example: CSE, IT, ECE, Mechanical, Civil, etc.)</div>
                {% if form.branch_department.errors %}
                    <ul class="errorlist">{% for error in form.branch_department.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.year_of_study.id_for_label }}" class="form-label required-field">6. Year of Study</label>
                {{ form.year_of_study }}
                {% if form.year_of_study.errors %}
                    <ul class="errorlist">{% for error in form.year_of_study.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.email_address.id_for_label }}" class="form-label required-field">7. Email Address</label>
                {{ form.email_address }}
                {% if form.email_address.errors %}
                    <ul class="errorlist">{% for error in form.email_address.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.mobile_number.id_for_label }}" class="form-label required-field">8. Mobile Number</label>
                {{ form.mobile_number }}
                {% if form.mobile_number.errors %}
                    <ul class="errorlist">{% for error in form.mobile_number.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <!-- SECTION 2 – LEARNING INTEREST -->
            <div class="section-header">SECTION 2 – LEARNING INTEREST</div>

            <div class="mb-3">
                <label for="{{ form.preferred_learning_domain.id_for_label }}" class="form-label required-field">9. Preferred Learning Domain</label>
                {{ form.preferred_learning_domain }}
                {% if form.preferred_learning_domain.errors %}
                    <ul class="errorlist">{% for error in form.preferred_learning_domain.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div id="learningDomainOtherField" class="conditional-field">
                <label for="{{ form.preferred_learning_domain_other.id_for_label }}" class="form-label">Please specify other domain</label>
                {{ form.preferred_learning_domain_other }}
            </div>

            <div class="mb-3">
                <label class="form-label required-field">10. Preferred Mode of Learning</label>
                <div class="radio-group">
                    {% for radio in form.preferred_mode_of_learning %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.preferred_mode_of_learning.errors %}
                    <ul class="errorlist">{% for error in form.preferred_mode_of_learning.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label class="form-label required-field">11. Current Skill Level in Selected Domain</label>
                <div class="radio-group">
                    {% for radio in form.current_skill_level %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.current_skill_level.errors %}
                    <ul class="errorlist">{% for error in form.current_skill_level.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <!-- SECTION 3 – INTERNSHIP & CAREER INTEREST -->
            <div class="section-header">SECTION 3 – INTERNSHIP & CAREER INTEREST</div>

            <div class="mb-3">
                <label class="form-label required-field">12. Are you interested in Internship Opportunities?</label>
                <div class="radio-group">
                    {% for radio in form.interested_in_internship %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.interested_in_internship.errors %}
                    <ul class="errorlist">{% for error in form.interested_in_internship.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label class="form-label required-field">13. Are you interested in Job Placement Opportunities?</label>
                <div class="radio-group">
                    {% for radio in form.interested_in_job %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.interested_in_job.errors %}
                    <ul class="errorlist">{% for error in form.interested_in_job.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label class="form-label required-field">14. Do you have any previous internship experience?</label>
                <div class="radio-group">
                    {% for radio in form.previous_internship_experience %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.previous_internship_experience.errors %}
                    <ul class="errorlist">{% for error in form.previous_internship_experience.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div id="internshipDetailsField" class="conditional-field">
                <div class="mb-3">
                    <label for="{{ form.internship_company_name.id_for_label }}" class="form-label">Company/Organisation Name</label>
                    {{ form.internship_company_name }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.internship_role.id_for_label }}" class="form-label">Role / Designation</label>
                    {{ form.internship_role }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.internship_duration.id_for_label }}" class="form-label">15. If Yes – Internship Duration</label>
                    {{ form.internship_duration }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.internship_skills_gained.id_for_label }}" class="form-label">16. Key Skills Gained from Internship (Optional)</label>
                    {{ form.internship_skills_gained }}
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label required-field">17. Do you have any prior job experience?</label>
                <div class="radio-group">
                    {% for radio in form.prior_job_experience %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.prior_job_experience.errors %}
                    <ul class="errorlist">{% for error in form.prior_job_experience.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div id="jobDetailsField" class="conditional-field">
                <div class="mb-3">
                    <label for="{{ form.job_company_name.id_for_label }}" class="form-label">Company/Organisation Name</label>
                    {{ form.job_company_name }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.job_role.id_for_label }}" class="form-label">Role / Designation</label>
                    {{ form.job_role }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.job_duration.id_for_label }}" class="form-label">18. If Yes – Job Duration</label>
                    {{ form.job_duration }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.job_skills_gained.id_for_label }}" class="form-label">19. Key Skills Gained from Job (Optional)</label>
                    {{ form.job_skills_gained }}
                </div>
            </div>

            <div class="mb-3">
                <label for="{{ form.preferred_career_domain.id_for_label }}" class="form-label required-field">20. Preferred Career Domain</label>
                {{ form.preferred_career_domain }}
                {% if form.preferred_career_domain.errors %}
                    <ul class="errorlist">{% for error in form.preferred_career_domain.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div id="careerDomainOtherField" class="conditional-field">
                <label for="{{ form.preferred_career_domain_other.id_for_label }}" class="form-label">Please specify other career domain</label>
                {{ form.preferred_career_domain_other }}
            </div>

            <div class="mb-3">
                <label class="form-label required-field">21. Availability for Internship / Job</label>
                <div class="radio-group">
                    {% for radio in form.availability %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.availability.errors %}
                    <ul class="errorlist">{% for error in form.availability.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label class="form-label required-field">22. Open to Remote Opportunities?</label>
                <div class="radio-group">
                    {% for radio in form.open_to_remote %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.open_to_remote.errors %}
                    <ul class="errorlist">{% for error in form.open_to_remote.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.resume.id_for_label }}" class="form-label">23. Resume Upload (Optional)</label>
                {{ form.resume }}
                <div class="help-text">Upload your latest resume (Supported: PDF / DOC – Max 5 MB)</div>
                {% if form.resume.errors %}
                    <ul class="errorlist">{% for error in form.resume.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <!-- SECTION 4 – HACKATHON REGISTRATION -->
            <div class="section-header">SECTION 4 – HACKATHON REGISTRATION</div>

            <div class="mb-3">
                <label for="{{ form.team_name.id_for_label }}" class="form-label">24. Team Name</label>
                {{ form.team_name }}
                <div class="help-text">(Required only if you already have a team)</div>
                {% if form.team_name.errors %}
                    <ul class="errorlist">{% for error in form.team_name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label class="form-label required-field">25. Do you need mentor support before Hackathon?</label>
                <div class="radio-group">
                    {% for radio in form.need_mentor_support %}
                        {{ radio }}
                    {% endfor %}
                </div>
                {% if form.need_mentor_support.errors %}
                    <ul class="errorlist">{% for error in form.need_mentor_support.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.college_registration_number.id_for_label }}" class="form-label required-field">26. College Registration Number</label>
                {{ form.college_registration_number }}
                {% if form.college_registration_number.errors %}
                    <ul class="errorlist">{% for error in form.college_registration_number.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.naan_mudhalvan_id.id_for_label }}" class="form-label">27. Naan Mudhalvan ID</label>
                {{ form.naan_mudhalvan_id }}
                {% if form.naan_mudhalvan_id.errors %}
                    <ul class="errorlist">{% for error in form.naan_mudhalvan_id.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="{{ form.project_file.id_for_label }}" class="form-label required-field">28. Project File</label>
                {{ form.project_file }}
                <div class="help-text">(Supported: PDF / DOC – Max 5 MB)</div>
                {% if form.project_file.errors %}
                    <ul class="errorlist">{% for error in form.project_file.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <!-- SECTION 5 – CONSENT & CONFIRMATION -->
            <div class="section-header">SECTION 5 – CONSENT & CONFIRMATION</div>

           <div class="mb-3">
    <label class="form-label required-field">29. Communication Consent</label>
    <div class="form-check">
        {{ form.communication_consent }}
        <label class="form-check-label" for="{{ form.communication_consent.id_for_label }}">
            I agree to be contacted regarding: Free courses, Internship opportunities, Job opportunities, and Hackathon updates
        </label>
    </div>
    <div class="help-text">
        You must agree before submitting the form.
    </div>
</div>


            <!-- Submit Button -->
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary" id="submitBtn" disabled>
    Submit Registration
</button>

            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Show/hide conditional fields
        document.addEventListener('DOMContentLoaded', function() {
            // Learning Domain - Other
            const learningDomain = document.querySelector('select[name="preferred_learning_domain"]');
            const learningDomainOther = document.getElementById('learningDomainOtherField');
            
            learningDomain.addEventListener('change', function() {
                if (this.value === 'Other') {
                    learningDomainOther.classList.add('show');
                } else {
                    learningDomainOther.classList.remove('show');
                }
            });
            if (learningDomain.value === 'Other') {
                learningDomainOther.classList.add('show');
            }

            // Internship Experience
            const internshipRadios = document.querySelectorAll('input[name="previous_internship_experience"]');
            const internshipDetails = document.getElementById('internshipDetailsField');
            
            internshipRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Yes' || this.value === 'Currently pursuing') {
                        internshipDetails.classList.add('show');
                    } else {
                        internshipDetails.classList.remove('show');
                    }
                });
                if (radio.checked && (radio.value === 'Yes' || radio.value === 'Currently pursuing')) {
                    internshipDetails.classList.add('show');
                }
            });

            // Job Experience
            const jobRadios = document.querySelectorAll('input[name="prior_job_experience"]');
            const jobDetails = document.getElementById('jobDetailsField');
            
            jobRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Yes' || this.value === 'Currently pursuing') {
                        jobDetails.classList.add('show');
                    } else {
                        jobDetails.classList.remove('show');
                    }
                });
                if (radio.checked && (radio.value === 'Yes' || radio.value === 'Currently pursuing')) {
                    jobDetails.classList.add('show');
                }
            });

            // Career Domain - Other
            const careerDomain = document.querySelector('select[name="preferred_career_domain"]');
            const careerDomainOther = document.getElementById('careerDomainOtherField');
            
            careerDomain.addEventListener('change', function() {
                if (this.value === 'Other') {
                    careerDomainOther.classList.add('show');
                } else {
                    careerDomainOther.classList.remove('show');
                }
            });
            if (careerDomain.value === 'Other') {
                careerDomainOther.classList.add('show');
            }
        });


    document.addEventListener('DOMContentLoaded', function () {
        const consentCheckbox = document.querySelector(
        'input[name="communication_consent"]'
    );
         const submitBtn = document.getElementById('submitBtn');

    // Initial state
        submitBtn.disabled = !consentCheckbox.checked;

    // Toggle submit button on checkbox change
        consentCheckbox.addEventListener('change', function () {
        submitBtn.disabled = !this.checked;
    });
});

document.addEventListener('DOMContentLoaded', function () {
    const zoneSelect = document.getElementById('id_zone');
    const districtSelect = document.getElementById('id_district');
    const collegeSelect = document.getElementById('id_college');

    // When Zone changes → load districts
    zoneSelect.addEventListener('change', function () {
        const zoneId = this.value;
        districtSelect.innerHTML = '<option value="">---------</option>';
        collegeSelect.innerHTML = '<option value="">---------</option>';
        if (!zoneId) return;

        fetch("{% url 'ajax_load_districts' %}?zone_id=" + zoneId)
            .then(response => response.json())
            .then(data => {
                data.forEach(district => {
                    const option = document.createElement('option');
                    option.value = district.id;
                    option.text = district.name;
                    districtSelect.add(option);
                });
            });
    });

    // When District changes → load colleges
    districtSelect.addEventListener('change', function () {
        const districtId = this.value;
        collegeSelect.innerHTML = '<option value="">---------</option>';
        if (!districtId) return;

        fetch("{% url 'ajax_load_colleges' %}?district_id=" + districtId)
            .then(response => response.json())
            .then(data => {
                data.forEach(college => {
                    const option = document.createElement('option');
                    option.value = college.id;
                    option.text = college.name;
                    collegeSelect.add(option);
                });
            });
    });
});

    </script>
</body>
</html>